<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Webpack App</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <body style="margin: 0">
    <div>
      <a href="./">Back</a>
      /
      <button onclick="init()">init</button>
      /
      <button onclick="destroy()">destroy</button>
      /
      <button onclick="saveTemplate()">saveTemplate</button>
      /
      <button onclick="updateTemplate()">updateTemplate</button>
      /
      <label>
        loadTemplate
        <input type="file" accept="application/json" onchange="loadTemplate(this.files[0])" />
      </label>
    </div>
    <div id="app"></div>
    <script src="./index.js"></script>
    <script>
      let editor = null;

      function init() {
        editor = new LabelmakeUi.TemplateDesigner({
          domContainer,
          template: getTemplate(),
          size,
          saveTemplate: (t) => {
            alert('saved');
            localStorage.setItem('template', JSON.stringify(t));
          },
        });
      }

      function destroy() {
        editor.destroy();
      }

      function saveTemplate() {
        editor.saveTemplate();
      }

      function updateTemplate() {
        editor.updateTemplate(getSampleTemplate());
      }

      function loadTemplate(file) {
        const reader = new FileReader();
        reader.onload = () => {
          editor.updateTemplate(JSON.parse(reader.result));
        };
        reader.readAsText(file);
      }

      window.onload = init;
    </script>
  </body>
</html>
