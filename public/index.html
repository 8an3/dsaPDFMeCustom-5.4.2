<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Webpack App</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <body style="margin: 0">
    <div id="app">
      Please see README.md
      <br />
      It won't work unless you start it on the server.
      <br />
      ---------------------------------------------------
      <br />
      npm install -g serve<br />
      serve -s dist
    </div>
    <script>
      window.onload = function () {
        const domContainer = document.getElementById('app');
        const fetchTemplate = () =>
          new Promise((r) =>
            r({
              columns: ['field1', 'field2'],
              sampledata: [
                {
                  field1: 'bb',
                  field2: 'aaaaaaaaaaaa',
                },
              ],
              fontName: '',
              basePdf: LabelmakeEditor.blankPdf,
              schemas: [
                {
                  field1: {
                    type: 'text',
                    position: { x: 20, y: 20 },
                    width: 100,
                    height: 15,
                    alignment: 'left',
                    fontSize: 30,
                    characterSpacing: 0,
                    lineHeight: 1,
                  },
                  field2: {
                    type: 'text',
                    position: { x: 20, y: 35 },
                    width: 100,
                    height: 40,
                    alignment: 'left',
                    fontSize: 20,
                    characterSpacing: 0,
                    lineHeight: 1,
                  },
                },
              ],
            })
          );
        const saveTemplate = (t) => {
          return new Promise((resolve) => {
            const blob = new Blob([JSON.stringify(t)], {
              type: 'application/json',
            });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `template.json`;
            link.click();
            URL.revokeObjectURL(url);
            console.log(t);
            resolve(t);
          });
        };

        LabelmakeEditor.init(domContainer, fetchTemplate, saveTemplate);
      };
    </script>
  </body>
</html>
